@page "/user-setting"

<PageTitle>Настройки</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium">
    <MudText Typo="Typo.h5" Align="Align.Justify" GutterBottom="true" Class="mt-4 px-3">
        <b>Настройки:</b>
    </MudText>

    <MudGrid Class="mt-2">
        @*Левая колонка*@
        <MudItem xs="12" sm="5" md="4" Class="py-1">
            <MudItem Class="d-flex align-center px-3 py-2 h-100" Style="min-height: 74px;">
                <MudText>
                    Платформа для просмотра:
                </MudText>
            </MudItem>
        </MudItem>

        @*Правая колонка*@
        <MudItem xs="12" sm="7" md="5" Class="py-1">
            <MudItem Class="d-flex justify-space-between align-center px-2 py-2 h-100"
                     Style="min-height: 74px;">
                <MudSwitch T="bool"
                           Style="user-select: none;"
                           Value="@SocialPageSwitch1"
                           ValueChanged="@(v => OnSwitchSocialPageChanged(nameof(SocialPageSwitch1), v))"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">YouTube</MudText>
                </MudSwitch>

                <MudSwitch T="bool"
                           Style="user-select: none;"
                           Value="@SocialPageSwitch2"
                           ValueChanged="@(v => OnSwitchSocialPageChanged(nameof(SocialPageSwitch2), v))"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">RuTube</MudText>
                </MudSwitch>

                <MudSwitch T="bool"
                           Style="user-select: none;"
                           Value="@SocialPageSwitch3"
                           ValueChanged="@(v => OnSwitchSocialPageChanged(nameof(SocialPageSwitch3), v))"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">VK Видео</MudText>
                </MudSwitch>
            </MudItem>
        </MudItem>
    </MudGrid>

    @*Для выбора ЯП*@
    @*<MudGrid Class="mt-2">
        $1$Левая колонка#1#
        <MudItem xs="12" sm="5" md="4" Class="py-1">
            <MudItem Elevation="1" Class="d-flex align-center px-3 py-2 h-100" Style="min-height: 74px;">
                <MudText>
                    Язык изучения (ЯП):
                </MudText>
            </MudItem>
        </MudItem>

        $1$Правая колонка#1#
        <MudItem xs="12" sm="7" md="5" Class="py-1">
            <MudItem Elevation="1" Class="d-flex justify-space-between align-center px-2 py-2 h-100"
                     Style="min-height: 74px;">
                <MudSwitch T="bool"
                           Style="user-select: none;"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">C#</MudText>
                </MudSwitch>

                <MudSwitch T="bool"
                           Style="user-select: none;"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">PHP</MudText>
                </MudSwitch>
                
                <MudSwitch T="bool"
                           Style="user-select: none;"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">Laravel</MudText>
                </MudSwitch>

                <MudSwitch T="bool"
                           Style="user-select: none;"
                           LabelPlacement="@Placement"
                           Color="Color.Success"
                           UncheckedColor="Color.Error">
                    <MudText Typo="Typo.caption">Python</MudText>
                </MudSwitch>
            </MudItem>
        </MudItem>
    </MudGrid>*@
</MudContainer>

@code {

    #region Инициализация переменных для Switch соц.сетей

    /*Switch для социальных сетей */
    public bool SocialPageSwitch1 { get; private set; }
    public bool SocialPageSwitch2 { get; private set; }
    public bool SocialPageSwitch3 { get; private set; }

    #endregion

    /// <summary>
    /// Положение текста
    /// </summary>
    private static Placement Placement => Placement.Bottom;

    /// <summary>
    /// Переключение Switch(-ей) для соц. сетей
    /// </summary>
    /// <param name="propertyName">switch name</param>
    /// <param name="value">switch value</param>
    private void OnSwitchSocialPageChanged(string propertyName, bool value)
    {
        //Если пытаемся установить единственный Switch на false
        if (!value)
            return;

        SocialPageSwitch1 = false;
        SocialPageSwitch2 = false;
        SocialPageSwitch3 = false;

        //Включение Switch, который был установлен на True
        if (value)
        {
            switch (propertyName)
            {
                case nameof(SocialPageSwitch1): SocialPageSwitch1 = true; break;
                case nameof(SocialPageSwitch2): SocialPageSwitch2 = true; break;
                case nameof(SocialPageSwitch3): SocialPageSwitch3 = true; break;
            }

            /*Отправить запрос на изменение настроек у пользователя в бд*/
        }
    }

}